# Caddyåä»£EMBYä¸€é”®è„šæœ¬

![Language](https://img.shields.io/badge/Language-Bash-green.svg)
![License](https://img.shields.io/badge/License-MIT-blue.svg)
![Version](https://img.shields.io/badge/Version-V4.0-orange.svg)

è¿™æ˜¯ä¸€ä¸ªä¸“ä¸º **Emby** è®¾è®¡çš„ Caddy åå‘ä»£ç†ä¸€é”®é…ç½®è„šæœ¬ã€‚
æ”¯æŒè‡ªåŠ¨ç”³è¯· HTTPS è¯ä¹¦ã€è‡ªåŠ¨é…ç½®å¼€æœºè‡ªå¯ã€æ”¯æŒåä»£è¿œç¨‹ HTTPS æœåŠ¡å™¨ï¼Œå¹¶å†…ç½®äº†ç«¯å£å†²çªè‡ªåŠ¨å¤„ç†åŠŸèƒ½ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹ (ä¸€é”®å®‰è£…)

**ä½¿ç”¨ Root ç”¨æˆ·**åœ¨ç»ˆç«¯è¿è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ï¼š

```bash
bash <(curl -sL https://raw.githubusercontent.com/AiLi1337/install_caddy_emby/main/install_caddy_emby.sh)
```

## ğŸš€ V5 ç‰ˆæœ¬æ–°å¢æ ¸å¿ƒåŠŸèƒ½
   * **å¤šç«™ç‚¹æ”¯æŒ (è¿½åŠ æ¨¡å¼)**ï¼šä½ å¯ä»¥é€‰æ‹©â€œè¿½åŠ â€ä¸€ä¸ªæ–°çš„åŸŸååä»£ï¼Œè€Œä¸è¦†ç›–ä¹‹å‰çš„é…ç½®ã€‚å•å°æœºå™¨ï¼Œæ— é™ Embyï¼

   * **æŒ‡å®šåˆ é™¤**ï¼šå¯ä»¥åˆ—å‡ºå½“å‰æ‰€æœ‰åä»£åŸŸåï¼Œå¹¶æŒ‡å®šåˆ é™¤å…¶ä¸­æŸä¸€ä¸ªï¼Œä¸å½±å“å…¶ä»–ç«™ç‚¹ã€‚

   * **æ™ºèƒ½é˜²é‡**ï¼šæ·»åŠ æ–°åŸŸåæ—¶ï¼Œä¼šè‡ªåŠ¨æ£€æµ‹è¯¥åŸŸåæ˜¯å¦å·²å­˜åœ¨ï¼Œé¿å… Caddy æŠ¥é”™ã€‚
## âœ¨ æ ¸å¿ƒåŠŸèƒ½ (V4 æ›´æ–°)

  * **âš¡ï¸ æé€Ÿé…ç½®**ï¼šè‡ªåŠ¨è¯†åˆ«ç³»ç»Ÿ (Debian/Ubuntu/CentOS) å¹¶å®‰è£…æœ€æ–°ç‰ˆ Caddyã€‚
  * **ğŸ›  ç«¯å£è‡ªåŠ¨ä¿®å¤**ï¼šä¸€é”®æ£€æµ‹å¹¶å¼ºåˆ¶æ¸…ç†å ç”¨ 80/443 ç«¯å£çš„ Nginx/Apache è¿›ç¨‹ï¼Œè§£å†³ Caddy å¯åŠ¨å¤±è´¥é—®é¢˜ã€‚
  * **ğŸ”’ å®Œç¾ HTTPS æ”¯æŒ**ï¼š
      * è‡ªåŠ¨ç”³è¯·å¹¶ç»­æœŸ Let's Encrypt SSL è¯ä¹¦ã€‚
      * **æ”¯æŒåä»£ HTTPS åç«¯**ï¼šè‡ªåŠ¨ä¿®æ­£ Host å¤´ï¼Œå®Œç¾åä»£è¿œç¨‹ Emby æœåŠ¡å™¨ (è§£å†³ 404/403 é”™è¯¯)ã€‚
  * **ğŸš€ æ€§èƒ½ä¼˜åŒ–**ï¼š
      * å¼€å¯ Gzip å‹ç¼©ã€‚
      * é€ä¼ çœŸå® IP (`X-Forwarded-For`)ï¼Œæ–¹ä¾¿ Emby è¯†åˆ«å®¢æˆ·ç«¯ã€‚
      * è‡ªåŠ¨é…ç½®å¼€æœºè‡ªå¯ã€‚

## ğŸ“– ä½¿ç”¨æŒ‡å—

### 1\. è¿è¡Œè„šæœ¬

è¾“å…¥ä¸Šè¿°ä¸€é”®å‘½ä»¤åï¼Œæ‚¨å°†çœ‹åˆ°å¦‚ä¸‹èœå•ï¼š

```text
#################################################
#    Caddy + Emby å¤šç«™ç‚¹ç®¡ç†è„šæœ¬ (V5 Pro)       #
#################################################
 1. å®‰è£…ç¯å¢ƒ & Caddy
 2. æ·»åŠ /è¦†ç›– åä»£é…ç½® (æ”¯æŒå¤šç«™)
 3. åˆ é™¤æŒ‡å®šç«™ç‚¹é…ç½® (NEW!)
 4. æŸ¥çœ‹ Caddy é…ç½®æ–‡ä»¶
-------------------------------------------------
 5. åœæ­¢ Caddy
 6. é‡å¯ Caddy
 7. æŸ¥è¯¢ 443/80 ç«¯å£å ç”¨
 8. æš´åŠ›å¤„ç†ç«¯å£å ç”¨ (ä¿®å¤å¯åŠ¨å¤±è´¥)
 9. å¸è½½ Caddy
-------------------------------------------------
 0. é€€å‡ºè„šæœ¬

 è¯·è¾“å…¥æ•°å­— [0-9]: 

```
### 2\. æ¨èæ“ä½œæ­¥éª¤

1.  **å®‰è£…**ï¼šè¾“å…¥ `1` å®‰è£… Caddyã€‚
2.  **æ¸…ç†ç«¯å£**ï¼ˆå¯é€‰ä½†æ¨èï¼‰ï¼šå¦‚æœæ‚¨çš„æœåŠ¡å™¨å®‰è£…è¿‡ Nginxï¼Œå»ºè®®è¾“å…¥ `7` ç¡®ä¿ç«¯å£å¹²å‡€ã€‚
3.  **é…ç½®**ï¼šè¾“å…¥ `2`ï¼ŒæŒ‰ç…§æç¤ºè¾“å…¥æ‚¨çš„åŸŸåå’Œ Emby åœ°å€ã€‚
      * *åŸŸåç¤ºä¾‹*ï¼š`emby.yourdomain.com` (è¯·ç¡®ä¿å·²è§£æåˆ°æœ¬æœº IP)
      * *åç«¯ç¤ºä¾‹*ï¼š`127.0.0.1:8096` æˆ– `https://remote-emby.com:443`

## â“ å¸¸è§é—®é¢˜

**Q: å¯åŠ¨å¤±è´¥ï¼Œæç¤º "bind: address already in use"ï¼Ÿ**
A: è¿™æ˜¯å› ä¸º 80 æˆ– 443 ç«¯å£è¢« Nginx/Apache å ç”¨äº†ã€‚è¯·åœ¨è„šæœ¬èœå•ä¸­é€‰æ‹© **[7] æš´åŠ›å¤„ç†ç«¯å£å ç”¨**ï¼Œç„¶åé‡æ–°é€‰æ‹© **[4] é‡å¯ Caddy**ã€‚

**Q: åä»£å Emby æ— æ³•æ’­æ”¾æˆ– 404ï¼Ÿ**
A: è„šæœ¬å·²è‡ªåŠ¨å¤„ç† Host å¤´ã€‚è¯·ç¡®ä¿æ‚¨è¾“å…¥çš„åç«¯åœ°å€æ­£ç¡®ã€‚å¦‚æœæ˜¯è¿œç¨‹ HTTPS åç«¯ï¼Œè¯·åŠ¡å¿…å¸¦ä¸Š `https://` å‰ç¼€ã€‚

**Q: å¦‚ä½•æŸ¥çœ‹è¿è¡Œæ—¥å¿—ï¼Ÿ**
A: ä½¿ç”¨å‘½ä»¤ `systemctl status caddy -l` æˆ– `journalctl -u caddy -f`ã€‚
